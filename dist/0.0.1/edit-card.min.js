!function(e){function t(o){if(a[o])return a[o].exports;var r=a[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){a(1),e.exports=a(6)},function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=this;c.default.render(i.default.createElement(d.default,{dataURL:this.options.data_url,schemaURL:this.options.schema_url,optionalConfigURL:this.options.configuration_url,optionalConfigSchemaURL:this.options.configuration_schema_url,screenshotMode:this.screenshotMode,mode:this.mode,ref:function(e){t.containerInstance=t.containerInstance||e}}),this.options.selector)}var n=a(2),i=o(n),s=a(3),c=o(s),l=a(4),d=o(l);window.ProtoGraph=window.ProtoGraph||{},window.ProtoGraph.Card=window.ProtoGraph.Card||{},ProtoGraph.Card.toShare=function(){this.cardType="ShareCard"},ProtoGraph.Card.toShare.prototype.init=function(e){this.options=e},ProtoGraph.Card.toShare.prototype.renderFacebookCard=function(e){this.mode="screenshot",this.screenshotMode="fb_image",r.call(this,e)},ProtoGraph.Card.toShare.prototype.renderInstagramCard=function(e){this.mode="screenshot",this.screenshotMode="instagram_image",r.call(this,e)},ProtoGraph.Card.toShare.prototype.renderScreenshot=function(e){this.mode="screenshot",this.screenshotMode="instagram_image",r.call(this,e)}},function(e,t){e.exports=React},function(e,t){e.exports=ReactDOM},function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),c=a(2),l=o(c),d=a(3),u=(o(d),a(5)),p=o(u),h=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),o={fetchingData:!0,dataJSON:{},schemaJSON:void 0};return a.props.dataJSON&&(o.fetchingData=!1,o.dataJSON=a.props.dataJSON),a.props.schemaJSON&&(o.schemaJSON=a.props.schemaJSON),console.log(o,a.props,"++++++++++++++++++++++++++++="),a.state=o,a}return i(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this;console.log(this.state.fetchingData,"l;;;;;;;;;;;;;;;;;"),this.state.fetchingData&&(console.log("ppppppppppppppppppppppppppppppp"),p.default.all([p.default.get(this.props.dataURL),p.default.get(this.props.schemaURL)]).then(p.default.spread(function(t,a){e.setState({fetchingData:!1,dataJSON:t.data,schemaJSON:a.data}),console.log(";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;")})))}},{key:"getImageParameters",value:function(){var e=this.state.dataJSON.data,t=this.state.dataJSON.data.social_site_settings,a=void 0,o=void 0,r=e.cover_data.cover_title,n=e.cover_data.logo_image.image,i="screenshot"!==this.props.mode?this.props.mode:this.props.screenshotMode;switch(i){case"instagram_image":o=e.cover_data.instagram_image.image,a={width:t.instagram.min_height*t.instagram.width,height:t.instagram.min_height};break;case"fb_image":case"twitter":o=e.cover_data.fb_image.image,a={width:t.twitter.min_height*t.twitter.width,height:t.twitter.min_height}}return console.log({cover_title:r,logo_image:n,cover_image:o,styles:a}),{cover_title:r,logo_image:n,cover_image:o,styles:a}}},{key:"renderLaptop",value:function(){if(this.state.fetchingData)return l.default.createElement("div",null,"Loading");var e=this.getImageParameters(),t=e.cover_image,a=e.logo_image,o=e.cover_title,r=e.styles;return console.log(t,a,o,r),l.default.createElement("div",null,l.default.createElement("div",{className:"proto-cover-image"},l.default.createElement("img",{className:""+("instagram_image"===this.props.mode?"proto-cover-insta":"proto-cover-fb"),src:t}),l.default.createElement("div",{className:"proto-top-div"},l.default.createElement("div",{className:"proto-top-image"},a&&l.default.createElement("img",{className:"proto-logo-image",src:a})),o&&l.default.createElement("div",{className:"proto-quote-title"},o))))}},{key:"renderScreenshot",value:function(){if(this.state.fetchingData)return l.default.createElement("div",null,"Loading");var e=this.getImageParameters(),t=e.cover_image,a=e.logo_image,o=e.cover_title;e.styles;return l.default.createElement("div",{id:"ProtoScreenshot",className:"proto-cover-image"},l.default.createElement("img",{className:""+("instagram_image"===this.props.screenshotMode?"proto-cover-insta":"proto-cover-fb"),src:t}),l.default.createElement("div",{className:"proto-top-div"},l.default.createElement("div",{className:"proto-top-image"},a&&l.default.createElement("img",{className:"proto-logo-image",src:a})),o&&l.default.createElement("div",{className:"proto-quote-title"},o)))}},{key:"render",value:function(){switch(console.log(this.props.mode),this.props.mode){case"fb_image":return this.renderLaptop();case"instagram_image":return this.renderLaptop();case"screenshot":return this.renderScreenshot()}}}]),t}(l.default.Component);t.default=h},function(e,t){e.exports=axios},function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=this;c.default.render(i.default.createElement(d.default,{dataURL:this.options.data_url,schemaURL:this.options.schema_url,optionalConfigURL:this.options.configuration_url,optionalConfigSchemaURL:this.options.configuration_schema_url,editData:e,mode:this.mode,ref:function(e){t.containerInstance=t.containerInstance||e}}),this.options.selector)}var n=a(2),i=o(n),s=a(3),c=o(s),l=a(7),d=o(l);ProtoGraph.Card.toShare.prototype.getData=function(e){return this.containerInstance.exportData()},ProtoGraph.Card.toShare.prototype.renderEdit=function(e){this.mode="edit",r.call(this,e)}},function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),c=a(2),l=o(c),d=a(3),u=(o(d),a(5)),p=o(u),h=a(4),f=o(h),m=a(8),g=o(m),v=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={fetchingData:!0,type:"fb_image",dataJSON:{},schemaJSON:void 0},a.handleClick=a.handleClick.bind(a),a}return i(t,e),s(t,[{key:"handleClick",value:function(e){var t=e.target.closest("a.item").id;this.setState({type:t})}},{key:"exportData",value:function(){var e=this.state;return{dataJSON:e.dataJSON,name:e.dataJSON.data.cover_data.cover_title.substr(0,225)}}},{key:"componentDidMount",value:function(){var e=this;this.state.fetchingData&&p.default.all([p.default.get(this.props.dataURL),p.default.get(this.props.schemaURL)]).then(p.default.spread(function(t,a){e.setState({fetchingData:!1,dataJSON:t.data,schemaJSON:a.data}),e.props.editData&&"function"==typeof e.props.editData.onLastStep&&e.props.editData.onLastStep()}))}},{key:"diffObject",value:function(e,t){return Object.keys(e).reduce(function(a,o){return e[o]&&e[o].image&&t[o]&&t[o].image&&e[o].image!==t[o].image&&(a.changed=o),a},{})}},{key:"onChangeHandler",value:function(e){var t=this,a=e.formData;this.setState(function(e,o){var r=e.dataJSON,n=t.diffObject(r.data.cover_data,a.data.cover_data),i=document.getElementById(n.changed);r.data.cover_data=a.data.cover_data;var s={dataJSON:r};if(i)switch(i.id){case"fb_image":case"instagram_image":s.type=i.id}return s})}},{key:"render",value:function(){var e=this;return this.state.fetchingData?l.default.createElement("div",null,"Loading"):l.default.createElement("div",null,l.default.createElement("div",{className:"protograph_col_6 protograph-edit-form",id:"proto_share_form_div"},l.default.createElement(g.default,{schema:this.state.schemaJSON,onChange:function(t){return e.onChangeHandler(t)},formData:this.state.dataJSON},l.default.createElement("button",{type:"submit",className:"default-button protograph-primary-button protograph-submit-button"},"Publish"))),l.default.createElement("div",{className:"protograph_col_6 proto-share-card-div",id:"proto_share_card_div"},l.default.createElement("div",{className:"ui compact menu"},l.default.createElement("a",{className:"item "+("fb_image"===this.state.type?"active":""),id:"fb_image",onClick:this.handleClick},l.default.createElement("i",{className:"facebook square icon"})),l.default.createElement("a",{className:"item "+("twitter"===this.state.type?"active":""),id:"twitter",onClick:this.handleClick},l.default.createElement("i",{className:"twitter square icon"})),l.default.createElement("a",{className:"item "+("instagram_image"===this.state.type?"active":""),id:"instagram_image",onClick:this.handleClick},l.default.createElement("i",{className:"instagram icon"}))),l.default.createElement("div",{className:"preview"},l.default.createElement(f.default,{mode:this.state.type,screenshotMode:this.state.type,dataJSON:this.state.dataJSON,schemaJSON:this.state.schemaJSON}))))}}]),t}(l.default.Component);t.default=v},function(e,t){e.exports=JSONSchemaForm}]);